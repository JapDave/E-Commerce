{% extends 'user/user_base.html' %}
{% block title %}Cart{% endblock title %}
{% load tagger %}

{% block body %}
<nav aria-label="breadcrumbs" class="nav-page">
  <ol class="breadcrumbs">
    <li class="breadcrumb-items"><a href="{% url 'index' %}" class="text-dark">Home</a></li>
    <li class="breadcrumb-items"><a href="{% url 'cart' %}" class="text-dark">Cart</a></li>
  </ol>
</nav>

<section class="container-fluid">
    {% if messages %}
        <div>
            {% for message in messages %}
            <div class="alert {% if message.level == 25 %}alert-success {% else %}alert-danger {% endif %} m-2">
                <a class="close" href="#" data-dismiss="alert">Ã—</a>
                {{ message }}
            </div>
            {% endfor %}
        </div>
    {% endif %}
    <div class="items">
    {% for item in cart_item %}
            <div class="cart-item mt-4">
                <div>
                    <a href="{% url 'product_detail' item.product_items|private:'_id' %}"><img src="{{item.product_items.product_img.url}}" height="200px" class="rounded-cirlce"/></a>
                </div>
                <div>
                    <h5>{{item.product_items.product_enterprsie}}'s</h5>
                    <h6>{{item.product_items.product_name}}</h6>
                    <p class="text-muted">{{item.product_items.Description}}</p>
                    <div>
                        <form method="POST" >
                        {%csrf_token%}
                        <input type="hidden" name="product_id" value={{item.product_items|private:'_id'}}>
                            <select name="selected_qty" onchange="this.form.submit()">
                                <option {% if item.qty == 1 %}selected{% endif %} value=1>Qty: 1</option>
                                <option {% if item.qty == 2 %}selected{% endif %}  value=2>Qty: 2</option>
                                <option {% if item.qty == 3 %}selected{% endif %}  value=3>Qty: 3</option>
                                <option {% if item.qty == 4 %}selected{% endif %}  value=4>Qty: 4</option>
                                <option {% if item.qty == 5 %}selected{% endif %}  value=5>Qty: 5</option>
                                <option {% if item.qty == 6 %}selected{% endif %}  value=6>Qty: 6</option>
                                <option {% if item.qty == 7 %}selected{% endif %}  value=7>Qty: 7</option>
                            </select>
                            <p class="price">&#8377 {{item.product_items.Price}}/~   <a href="{% url 'remove_from_cart' item.product_items|private:'_id' %}"><i class="fas fa-trash fa-1x"></i></a> </p>
                           
                        </form>    
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="checkout-box">
        <h5>Summary</h5>
        <p>Total-items: {{item_count}}</p>
        <p>Sub-Total: &#8377 {{sub_total}}/~</p>
        <a href="{% url 'checkout' slug='cart' %}"><i class="fas fa-shopping-bag fa-1x"></i> Checkout </a>
    </div>   
</section>
<section>
    <div>
        {% if cart_item.has_other_pages %}
        <ul class="paginations">
          {% if cart_item.has_previous %}
            <li><a href="?page={{ products.previous_page_number }}">&laquo;</a></li>
          {% else %}
            <li class="disabled"><span>&laquo;</span></li>
          {% endif %}
          {% for i in cart_item.paginator.page_range %}
            {% if cart_item.number == i %}
              <li class="active"><span>{{ i }} <span class=""></span></span></li>
            {% else %}
              <li><a href="?page={{ i }}">{{ i }}</a></li>
            {% endif %}
          {% endfor %}
          {% if cart_item.has_next %}
            <li><a href="?page={{ products.next_page_number }}">&raquo;</a></li>
          {% else %}
            <li class="disabled"><span>&raquo;</span></li>
          {% endif %}
        </ul>
      {% endif %}
    </div>    
</section>




{% endblock body %}